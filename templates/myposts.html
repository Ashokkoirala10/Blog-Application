{% extends 'base.html' %}

{% block content %}
<h2 class="welcome-msg">Your Dashboard</h2>

<!-- Create New Post button -->
<div style="text-align:center; margin-bottom: 20px;margin-top: 20px; ">
    <a class="button" href="{{ url_for('create') }}">Create New Post</a>
</div>

<div class="posts">
    {% if posts.items %}
    {% for post in posts.items %}
    <article class="post">
        <h3>{{ post.title }}</h3>
        <p class="meta">{{ post.created_at.strftime('%Y-%m-%d') }}</p>
        <p>{{ post.body[:150] }}{% if post.body|length > 150 %}...{% endif %}</p>
        <div class="actions">
            <a href="/post/{{ post.id }}">Read</a>
            <a href="/edit/{{ post.id }}">Edit</a>
            <form action="/delete/{{ post.id }}" method="post" style="display: inline;">
                <button type="submit" class="delete-btn">Delete</button>
            </form>
        </div>
    </article>
    {% endfor %}
    {% else %}
    <p style="text-align:center; color:#666;">No posts available.</p>
    {% endif %}
</div>
{% endblock %}

{% block bottom_controls %}
<div class="pagination">
    {% if posts.has_prev %}
    <a href="{{ url_for('my_posts', page=posts.prev_num) }}">Previous</a>
    {% endif %}
    <span>Page {{ posts.page }} / {{ posts.pages }}</span>
    {% if posts.has_next %}
    <a href="{{ url_for('my_posts', page=posts.next_num) }}">Next</a>
    {% endif %}
</div>
{% endblock %}
