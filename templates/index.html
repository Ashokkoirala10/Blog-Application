{% extends 'base.html' %}

{% block content %}
<h1>All Posts</h1>

<div class="posts">
  {% for post in posts.items %}
  <article class="post">
    <h2>{{ post.title }}</h2>
    <p class="meta">
      By {{ post.author.username if post.author else 'Unknown' }} â€” {{ post.created_at.strftime('%Y-%m-%d') }}
    </p>
    <p>{{ post.body[:200] }}{% if post.body|length > 200 %}...{% endif %}</p>

    <!-- Wrap Read button in .actions for consistent styling -->
    <div class="actions">
      <a href="/post/{{ post.id }}">Read</a>
    </div>
  </article>
  {% endfor %}
</div>

<div class="pagination">
  {% if posts.has_prev %}
  <a href="/?page={{ posts.prev_num }}">Previous</a>
  {% endif %}
  <span>Page {{ posts.page }} / {{ posts.pages }}</span>
  {% if posts.has_next %}
  <a href="/?page={{ posts.next_num }}">Next</a>
  {% endif %}
</div>
{% endblock %}
